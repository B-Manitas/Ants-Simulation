ifeq ($(OS),Windows_NT) 
RM = del
else
RM = rm -rf
endif

all: compile-sfml link-sfml
	./main

test.o: test.cpp coord.hpp fourmi.hpp place.hpp grille.hpp action.hpp
	g++ -Wall -std=c++11 -c test.cpp

test: test.o coord.o fourmi.o place.o grille.o action.o
	g++ -Wall -std=c++11 -o test test.o coord.o fourmi.o place.o grille.o action.o

run-test: test
	-$(RM) *.o
	./test

principal.o: principal.hpp coord.hpp fourmi.hpp place.hpp grille.hpp grilleFourmis.hpp action.hpp
	g++ -Wall -std=c++11 -c principal.cpp

principal: principal.o coord.o fourmi.o place.o grille.o grilleFourmis.o action.o
	g++ -Wall -std=c++11 -o principal principal.o coord.o fourmi.o place.o grille.o grilleFourmis.o action.o

run-principal: principal
	-$(RM) *.o
	./principal

main.o: coord.hpp fourmi.hpp place.hpp grille.hpp grilleFourmis.hpp action.hpp
	g++ -Wall -std=c++11 -c main.cpp

main: main.o coord.o fourmi.o place.o grille.o grilleFourmis.o action.o
	g++ -Wall -std=c++11 -o  main coord.o fourmi.o place.o grille.o grilleFourmis.o action.o

compile-sfml: main
	g++ -Isrc/include -c main.cpp

link-sfml:
	g++ main.o -o main -Lsrc/lib -lsfml-graphics -lsfml-window -lsfml-system

clean:
	-$(RM) *.o
